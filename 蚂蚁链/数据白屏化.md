## 数据白屏化

> 核心功能：对蚂蚁链上的数据进行数据白屏化展示。
>
> 面向用户：平台人员以及用户。

### 支持功能

1. 多链并行数据拉取统计。

### 数据解析模块

1. 解析器的无状态性。service-manager-handler 3级管理，数据解析器并不关心属于哪一条链的数据。

2. 解析器的可扩展性。通过配置文件加载解析器。
3. 全局一致性。区块事务以及checkpoint点。

### 数据统计模块

1. 断点恢复。持久化存储断点数据。
2. 统计器可扩展新。通过配置文件加载解析器。service-manager-plugin-handler
3. 数据一致性。解析模块和统计模块可能存在数据不一致的情况。统计模块启动时读取解析数据。

### 性能优化

#### 数据获取

1. 多线程数据获取。抢占VS平均
2. 数据获取顺序性保证。确保数据解析模块能够获取区块数据顺序。
3. 线程安全的数据结构。获取数据需要往同一个数据结构中进行写数据。

#### 数据解析

1. 多线程数据解析。抢占VS平均
2. 解析数据顺序性保证。因为统计模块需要对解析数据进行顺序统计。
3. 线程安全的数据结构。因为多线程需要向同一个数据结构中写入数据。

#### 数据存储

1. 批量数据存储最优值。
2. 数据存储batch事务性。
3. 数据存储优化（分库分表，哈希一致性算法）。

#### 总的来说

1. 多线程数据获取，数据解析。
2. 数据批量存储。
3. 数据获取模块获取区块的顺序性保障，采用数据安全的数据结构。

#### 性能优化结果

没天拉拉取38w的区块变到108W(每100个区块28秒变成8秒)