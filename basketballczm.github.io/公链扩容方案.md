## 区块链扩容方案

1. Layer1 扩容方案，即直接增加链上的交易处理能力，这种方式也被称为链上扩容。常见技术方案：Sharding和DAG；
2. Layer2 扩容方案，即将链上的相当一部分工作转移到链下来做。常见技术State Channel，Plasma, Trusebit 和 zkrollup。

### zkrollup 扩容

**zkrollup扩容的主要思路：**将链上用户数据压缩在一颗merkletree中，并且将链上的数据转移到链下，在链上只是存储信任的根和对链下zksanrk产生proof进行验证，在链下做共识，并且通过zksnark技术保证链下用户状态变更的正确性。这样做的优点：

1. 链上不直接存储用户状态，减少链上状态更改带来的读写消耗的gas以及存储费用。
2. 提交上链的数据包括证明和必要的转账信息(信息可以是去掉signature和noce的值)，提交证明是为了验证电路逻辑的正确性，提交转账的必要信息是验证给电路输入的转账数据是没有被更改的。因为链上的合约也会根据publicData中的数据来计算这个publicDataHash。

总结起来核心思想为将主链作为存储媒介而非共识引擎，将交易压缩并且连同证明一起传输上链，在链下电路中达成共识，用零知识证明保证链下状态共识的安全性。

维塔利克·布特林

* [zkrollup扩容](https://www.chainnews.com/articles/787653002955.htm)