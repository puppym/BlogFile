# pcap说明 
1. 我们首先确定我们想要嗅探哪个接口。在Linux中，这可能类似于eth0，在BSD中它可能是xl1等。我们可以在字符串中定义此设备，或者我们可以要求pcap自己为我们提供将完成工作的接口的名称。
2. 初始化pcap。这是我们实际告诉pcap我们正在嗅探的设备。如果我们愿意，我们可以嗅探多个设备。我们如何区分它们？使用文件句柄。就像打开文件进行读写一样，我们必须命名我们的嗅探“会话”，以便我们可以将其与其他此类会话区分开来。
3. 如果我们只想嗅探特定的流量（例如：TCP/IP数据包，去往端口23的数据包等），我们必须创建一个规则集，“编译”并应用它。这是一个三阶段的过程，所有这些都是密切相关的。规则集保存在一个字符串中，并转换为pcap可以读取的格式（因此编译它。）编译实际上只是通过调用程序中的函数来完成的。它不涉及使用外部应用程序。然后我们告诉pcap将它应用于我们希望过滤的会话。
4. 最后，我们告诉pcap进入它的主要执行循环。在这种状态下，pcap会一直等到它收到了我们想要它的数据包。每次获取新数据包时，它都会调用我们已经定义的另一个函数。它调用的函数可以做任何我们想做的事情；它可以解析数据包并将其打印给用户，它可以将其保存在文件中，或者根本不执行任何操作。
5. 在满足我们的嗅探需求后，我们会结束会话并完成。


关于混杂与非混杂嗅探的说明：这两种技术的风格截然不同。在标准的，非混杂的嗅探中，主机仅嗅探与其直接相关的流量。嗅探器只会捕获通过主机的流量，来自或通过主机路由。另一方面，混杂模式嗅探线上的所有流量。在非交换机环境中，这可能是所有网络流量。这方面的一个明显优势是它提供了更多的嗅探包，根据嗅探网络的原因，这可能有用也可能没用。但是，打开嗅探也有缺点。混杂模式嗅探是可检测的；主机可以以很高的概率检测出该主机正在进行嗅探。其次，它仅适用于非交换环境（例如集线器或ARP泛洪的交换机）。第三，在高流量网络上，主机可能因为数据量巨大而消耗大量资源。
